<!DOCTYPE html>
<html class="no-js desktop">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, user-scalable=no"
        />
        <meta name="description" content="Proje detayları" />

        <link
            rel="apple-touch-icon"
            sizes="180x180"
            href="../apple-touch-icon.png"
        />
        <link
            rel="icon"
            type="image/png"
            href="../favicon-16x16.png"
            sizes="16x16"
        />
        <link
            rel="icon"
            type="image/png"
            href="../favicon-32x32.png"
            sizes="32x32"
        />
        <link rel="manifest" href="../manifest.json" />
        <link rel="mask-icon" href="../safari-pinned-tab.svg" color="#5bbad5" />
        <meta name="theme-color" content="#ffffff" />

        <title>Proje - Maman Corp</title>

        <script src="../assets/js/lib/modernizr-custom.min.js"></script>
        <script src="../jquery-3.1.1.min.js"></script>

        <link rel="stylesheet" href="../assets/css/main.css" />

        <!-- Proje detayları için ek CSS -->
        <style>
            .project-detail {
                padding: 20px;
                max-width: 1200px;
                margin: 0 auto;
            }

            .project-header h1 {
                font-size: 2.5em;
                margin-bottom: 20px;
                color: #cb071d;
            }

            .project-description {
                font-size: 1.2em;
                line-height: 1.6;
                margin-bottom: 40px;
                color: #666;
            }

            .project-gallery h3,
            .project-videos h3 {
                font-size: 1.8em;
                margin: 40px 0 20px 0;
                color: #333;
            }

            .gallery-grid,
            .videos-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 20px;
                margin-bottom: 40px;
            }

            .gallery-item,
            .video-item {
                background: #f9f9f9;
                border-radius: 8px;
                overflow: hidden;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            }

            .image-caption,
            .video-caption {
                padding: 15px;
                font-style: italic;
                color: #666;
                margin: 0;
                background: white;
            }

            @media (max-width: 768px) {
                .gallery-grid,
                .videos-grid {
                    grid-template-columns: 1fr;
                }

                .project-header h1 {
                    font-size: 2em;
                }
            }
        </style>

        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="../gtag/js?id=UA-60417875-24"></script>

        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag() {
                dataLayer.push(arguments);
            }
            gtag("js", new Date());

            gtag("config", "UA-60417875-24");
        </script>
    </head>
    <body class="page-id-projects">
        <div id="top-bar"></div>
        <a class=" " href="../index.html" id="logo">
            <svg
                xmlns="http://www.w3.org/2000/svg"
                width="156.9"
                height="49.1"
                viewbox="0 0 156.9 49.1"
            >
                <path
                    d="M78 4.6h4.1l3.4 5.5 3.4-5.5H93v14.1h-3.9v-8.1l-3.6 5.5h-.1l-3.6-5.5v8.1H78V4.6z"
                ></path>
                <path
                    d="M100 4.5h3.8l6 14.2h-4.2l-1-2.5h-5.4l-1 2.5H94l6-14.2zm3.5 8.7l-1.6-4-1.6 4h3.2z"
                ></path>
                <path
                    d="M110.8 4.6h4.1l3.4 5.5 3.4-5.5h4.1v14.1h-3.9v-8.1l-3.6 5.5h-.1l-3.6-5.5v8.1h-3.9V4.6z"
                ></path>
                <path
                    d="M132.8 4.5h3.8l6 14.2h-4.2l-1-2.5H132l-1 2.5h-4.1l5.9-14.2zm3.4 8.7l-1.6-4-1.6 4h3.2z"
                ></path>
                <path
                    d="M143.5 4.6h3.7l5.8 7.5V4.6h3.9v14.1h-3.4l-6-7.7v7.7h-3.9V4.6z"
                ></path>
                <path
                    d="M85.3 38.1c-1 0-2-.2-2.8-.5-.9-.4-1.7-.9-2.3-1.5-.7-.7-1.2-1.4-1.6-2.3-.4-.9-.6-1.9-.6-2.9s.2-2 .6-2.9c.4-.9.9-1.7 1.6-2.3.7-.7 1.4-1.2 2.4-1.6.9-.4 1.9-.6 3-.6.7 0 1.4.1 2 .2.6.1 1.1.3 1.6.6s.9.6 1.3.9c.4.4.8.8 1.1 1.2l-2.9 2.3c-.4-.5-.8-.9-1.3-1.2-.5-.3-1.1-.4-1.8-.4-.5 0-1 .1-1.4.3-.4.2-.8.5-1.1.8-.3.3-.5.7-.7 1.2-.2.5-.3.9-.3 1.5 0 .5.1 1 .3 1.5.2.5.4.9.7 1.2.3.3.6.6 1.1.8s.9.3 1.4.3c.4 0 .7 0 1-.1.3-.1.6-.2.8-.4.2-.2.5-.3.7-.5l.7-.7 2.9 2.1c-.3.5-.7.9-1.1 1.3-.4.4-.8.7-1.4 1s-1.1.5-1.7.7c-.7-.1-1.4 0-2.2 0z"
                ></path>
                <path
                    d="M100 38.1c-1.1 0-2.1-.2-3-.6-.9-.4-1.7-.9-2.4-1.6-.7-.7-1.2-1.4-1.6-2.3-.4-.9-.6-1.8-.6-2.8 0-1 .2-2 .6-2.9.4-.9.9-1.7 1.6-2.3.7-.7 1.5-1.2 2.4-1.6.9-.4 1.9-.6 3-.6s2.1.2 3 .6c.9.4 1.7.9 2.4 1.6.7.7 1.2 1.4 1.6 2.3s.6 1.8.6 2.8c0 1-.2 2-.6 2.9-.4.9-.9 1.7-1.6 2.3-.7.7-1.5 1.2-2.4 1.6-.9.4-1.9.6-3 .6zm0-3.5c.5 0 1-.1 1.5-.3.4-.2.8-.5 1.1-.8.3-.3.6-.7.7-1.2.2-.5.3-.9.3-1.5 0-.5-.1-1-.3-1.5-.2-.5-.4-.9-.7-1.2-.3-.4-.7-.6-1.2-.8-.4-.2-.9-.3-1.5-.3-.5 0-1 .1-1.5.3-.4.2-.8.5-1.1.8-.3.3-.6.7-.7 1.2-.2.5-.3.9-.3 1.5 0 .5.1 1 .3 1.5.2.5.4.9.7 1.2s.7.6 1.1.8c.6.1 1.1.3 1.6.3z"
                ></path>
                <path
                    d="M109.2 23.7h6.7c1.1 0 2 .1 2.8.4.8.3 1.4.6 1.8 1.1.8.8 1.3 1.9 1.3 3.3 0 1.1-.3 2-.8 2.7-.5.7-1.2 1.3-2.1 1.6l3.4 4.9h-4.5l-2.8-4.3h-1.7v4.3h-3.9v-14zm6.5 6.8c.7 0 1.2-.2 1.6-.5.4-.3.5-.7.5-1.2 0-.6-.2-1-.6-1.3-.4-.3-.9-.4-1.6-.4H113v3.4h2.7z"
                ></path>
                <path
                    d="M123.4 23.7h6.1c.9 0 1.7.1 2.4.3.7.2 1.3.5 1.9 1 .5.4.9.9 1.2 1.6.3.6.4 1.3.4 2.1s-.1 1.6-.5 2.2c-.3.6-.7 1.2-1.3 1.6-.5.4-1.2.8-1.9 1s-1.6.3-2.4.3h-1.9v4h-3.9V23.7zm5.7 7c.7 0 1.2-.2 1.6-.5.4-.3.6-.8.6-1.3 0-.6-.2-1.1-.6-1.4-.4-.3-1-.5-1.7-.5h-1.8v3.8h1.9z"
                ></path>
                <g fill="#CB071D">
                    <path
                        d="M57.2 0H0v49.1h8.2V8.2h8.2v40.9h8.1V8.2h32.7v24.5h8.2V0z"
                    ></path>
                    <path
                        d="M40.9 24.5h8.2v-8.1H32.7v32.7h32.7v-8.2H40.9z"
                    ></path>
                </g>
            </svg>
        </a>
        <nav class="" id="nav">
            <input
                id="nav-is-open"
                type="checkbox"
                value=""
                aria-hidden="true"
            />

            <label id="nav-toggle" class="" for="nav-is-open">
                <span id="nav-toggle__list">
                    <span class="nav-toggle__list__line"></span>
                    <span class="nav-toggle__list__line"></span>
                    <span class="nav-toggle__list__line"></span>
                </span>
                <span id="nav-toggle__cross">
                    <span class="nav-toggle__cross__line"></span>
                    <span class="nav-toggle__cross__line"></span>
                </span>
            </label>

            <div id="nav__content">
                <div id="nav__content__inner">
                    <div id="nav__content__bg">
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="1440"
                            height="900"
                            viewbox="0 0 1440 900"
                        >
                            <path
                                fill="none"
                                stroke="#E02D2D"
                                stroke-width="64"
                                stroke-miterlimit="10"
                                d="M-41 715l398-398L-15-55"
                            ></path>
                            <path
                                fill="none"
                                stroke="#C40E0E"
                                stroke-width="64"
                                stroke-miterlimit="10"
                                d="M541.5 122.8L701.7-37.5"
                            ></path>
                            <path
                                fill="none"
                                stroke="#D14B4B"
                                stroke-width="64"
                                stroke-miterlimit="10"
                                d="M1007 353L813.8 159.9 513 461.9l506.9 515.9"
                            ></path>
                        </svg>
                    </div>
                    <ul class="nav__list" id="nav__main-list">
                        <li class="nav__item" data-id="home">
                            <a class="nav__link" href="../index.html">
                                <span class="nav__link__label">Ana Sayfa</span>
                            </a>
                        </li>
                        <li class="nav__item" data-id="solutions">
                            <a class="nav__link" href="../solutions.html">
                                <span class="nav__link__label">Çözümler</span>
                            </a>
                        </li>
                        <li class="nav__item" data-id="process">
                            <a class="nav__link" href="../process.html">
                                <span class="nav__link__label">Süreç</span>
                            </a>
                        </li>
                        <li class="nav__item" data-id="projects">
                            <a class="nav__link" href="index.htm">
                                <span class="nav__link__label">Projeler</span>
                            </a>
                        </li>
                        <li class="nav__item" data-id="about">
                            <a class="nav__link" href="../about.html">
                                <span class="nav__link__label">Hakkımızda</span>
                            </a>
                        </li>
                    </ul>

                    <ul class="nav__list" id="nav__side-list">
                        <li class="nav__item" data-id="contact">
                            <a class="nav__link" href="../contact.html">
                                <span class="nav__link__label">İletişim</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <div id="page-container">
            <section
                class="page"
                id="projects-page"
                data-first-project-id=""
                data-title=""
            >
                <div id="projects-line"></div>

                <nav class="" id="projects__nav">
                    <div id="projects__nav__color-overlay"></div>
                    <div id="projects__nav__overlay"></div>
                    <button id="projects__nav__shrink">
                        <span id="projects__nav__shrink__txt"
                            >Projeye geri dön</span
                        >
                    </button>
                    <ul id="projects__nav__list">
                        <!-- Projeler buraya dinamik olarak yüklenecek -->
                        <li class="projects__nav__item">
                            <div style="padding: 20px; text-align: center">
                                Projeler yükleniyor...
                            </div>
                        </li>
                    </ul>
                </nav>

                <!-- Proje içeriği buraya dinamik olarak yüklenecek -->
                <div id="project-content">
                    <div style="padding: 50px; text-align: center">
                        <h2>Proje detayları yükleniyor...</h2>
                    </div>
                </div>
            </section>
        </div>

        <!-- Projeler için JavaScript -->
        <script src="../assets/js/projects.js"></script>
        <script src="../assets/js/scripts.js"></script>

        <!-- Entegre Proje Yönetimi JavaScript -->
        <script>
            // Supabase Proje Yönetimi - Entegre Versiyon
            class ProjectManager {
                constructor() {
                    this.supabaseUrl =
                        "https://yrzhafgmqbkmxtudbjgq.supabase.co";
                    this.supabaseKey =
                        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlyemhhZmdtcWJrbXh0dWRiamdxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM1ODIyMTgsImV4cCI6MjA2OTE1ODIxOH0.RsETlfoKgE2HMK8qU_8JEKNMn_MIKZrdZxD5DdH6wkk";
                    this.projects = [];
                    this.currentProject = null;
                }

                // Supabase'den projeler ve primary medyalarını çek
                async loadProjects() {
                    try {
                        const response = await $.ajax({
                            url: `${this.supabaseUrl}/rest/v1/projects?select=*&order=created_at.desc`,
                            method: "GET",
                            headers: {
                                apikey: this.supabaseKey,
                                Authorization: `Bearer ${this.supabaseKey}`,
                                "Content-Type": "application/json",
                            },
                        });

                        this.projects = response;
                        console.log("Projeler yüklendi:", this.projects);

                        // Her proje için medyalarını çek
                        if (this.projects && this.projects.length > 0) {
                            for (let project of this.projects) {
                                try {
                                    const media = await $.ajax({
                                        url: `${this.supabaseUrl}/rest/v1/project_media?project_id=eq.${project.id}&limit=1`,
                                        method: "GET",
                                        headers: {
                                            apikey: this.supabaseKey,
                                            Authorization: `Bearer ${this.supabaseKey}`,
                                            "Content-Type": "application/json",
                                        },
                                    });
                                    project.project_media = media;
                                    console.log(
                                        `✅ Proje ${project.id} medyası yüklendi:`,
                                        media.length,
                                        "adet"
                                    );
                                } catch (mediaError) {
                                    console.warn(
                                        `❌ Proje ${project.id} için medya yüklenemedi:`,
                                        mediaError
                                    );
                                    project.project_media = [];
                                }
                            }
                        }

                        return this.projects;
                    } catch (error) {
                        console.error("Projeler yüklenirken hata:", error);
                        this.projects = this.getTestData();
                        return this.projects;
                    }
                }

                // Proje ID'sine göre tüm medyaları çek
                async loadProjectMedia(projectId) {
                    try {
                        console.log(
                            `🔍 Proje ${projectId} için medyalar yükleniyor...`
                        );

                        const response = await $.ajax({
                            url: `${this.supabaseUrl}/rest/v1/project_media?project_id=eq.${projectId}&order=uploaded_at.asc`,
                            method: "GET",
                            headers: {
                                apikey: this.supabaseKey,
                                Authorization: `Bearer ${this.supabaseKey}`,
                                "Content-Type": "application/json",
                            },
                        });

                        console.log(
                            `✅ Proje ${projectId} için ${response.length} medya yüklendi`
                        );
                        return response;
                    } catch (error) {
                        console.error(
                            "Proje medyaları yüklenirken hata:",
                            error
                        );
                        return [];
                    }
                }

                // Test verisi
                getTestData() {
                    return [
                        {
                            id: "550e8400-e29b-41d4-a716-446655440001",
                            title: "Su Üniversitesi",
                            description:
                                "Modern eğitim kompleksi projesi. Teknoloji ve eğitim alanında öncü bir proje.",
                            created_at: "2024-01-15T10:00:00Z",
                            user_id: "12345678-1234-1234-1234-123456789012",
                            project_media: [
                                {
                                    media_type: "image",
                                    media_url:
                                        "/admin/wp-content/uploads/2018/05/millermiller-MM1_9166-nalco-ecolab-naperville-050916.jpg",
                                    caption: "Su Üniversitesi ana binası",
                                    is_primary: true,
                                },
                            ],
                        },
                        {
                            id: "550e8400-e29b-41d4-a716-446655440002",
                            title: "Schneider Schaumburg",
                            description:
                                "Endüstriyel ofis konsolidasyonu projesi. Modern çalışma alanları.",
                            created_at: "2024-01-10T10:00:00Z",
                            user_id: "12345678-1234-1234-1234-123456789012",
                            project_media: [
                                {
                                    media_type: "image",
                                    media_url:
                                        "/admin/wp-content/uploads/2018/05/IMG_0180.jpg",
                                    caption: "Schneider ofis alanları",
                                    is_primary: true,
                                },
                            ],
                        },
                        {
                            id: "550e8400-e29b-41d4-a716-446655440003",
                            title: "Yönetim ve Toplantı Alanları",
                            description:
                                "Kurumsal yönetim merkezi ve modern toplantı salonları.",
                            created_at: "2024-01-05T10:00:00Z",
                            user_id: "12345678-1234-1234-1234-123456789012",
                            project_media: [
                                {
                                    media_type: "image",
                                    media_url:
                                        "/admin/wp-content/uploads/2018/05/IMG_0214.jpg",
                                    caption: "Toplantı salonları",
                                    is_primary: true,
                                },
                            ],
                        },
                    ];
                }

                // Proje listesi HTML'i oluştur
                generateProjectListHTML(projects) {
                    if (!projects || projects.length === 0) {
                        return '<li style="padding: 20px; text-align: center; color: #666;">Proje bulunamadı</li>';
                    }

                    return projects
                        .map((project, index) => {
                            const primaryMedia =
                                project.project_media &&
                                project.project_media.length > 0
                                    ? project.project_media[0]
                                    : null;

                            let imageUrl = "";
                            if (primaryMedia && primaryMedia.media_url) {
                                imageUrl = primaryMedia.media_url.startsWith(
                                    "/"
                                )
                                    ? primaryMedia.media_url
                                    : "/" + primaryMedia.media_url;
                            } else {
                                imageUrl =
                                    "/admin/wp-content/uploads/2018/05/millermiller-MM1_9166-nalco-ecolab-naperville-050916.jpg";
                            }

                            return `
                        <li class="projects__nav__item" data-id="${project.id}">
                            <a class="projects__nav__link" href="?id=${
                                project.id
                            }" data-ajax="false">
                                <div class="projects__nav__index">
                                    <div class="projects__nav__index__txt">
                                        ${String(index + 1).padStart(2, "0")}
                                    </div>
                                    <div class="projects__nav__index__line"></div>
                                </div>
                                <div class="projects__nav__infos">
                                    <div class="projects__nav__infos__title">
                                        ${project.title || "Başlıksız Proje"}
                                    </div>
                                    <ul class="projects__nav__infos__tags">
                                        <li class="projects__nav__infos__tag">
                                            <div class="projects__nav__infos__tag__name">Oluşturulma</div>
                                            <div class="projects__nav__infos__tag__value">
                                                ${
                                                    project.created_at
                                                        ? new Date(
                                                              project.created_at
                                                          ).toLocaleDateString(
                                                              "tr-TR"
                                                          )
                                                        : "Bilinmiyor"
                                                }
                                            </div>
                                        </li>
                                        ${
                                            project.description
                                                ? `
                                        <li class="projects__nav__infos__tag">
                                            <div class="projects__nav__infos__tag__name">Açıklama</div>
                                            <div class="projects__nav__infos__tag__value">
                                                ${project.description.substring(
                                                    0,
                                                    50
                                                )}${
                                                      project.description
                                                          .length > 50
                                                          ? "..."
                                                          : ""
                                                  }
                                            </div>
                                        </li>
                                        `
                                                : ""
                                        }
                                        ${
                                            primaryMedia
                                                ? `
                                        <li class="projects__nav__infos__tag">
                                            <div class="projects__nav__infos__tag__name">Medya</div>
                                            <div class="projects__nav__infos__tag__value">
                                                ${project.project_media.length} dosya
                                            </div>
                                        </li>
                                        `
                                                : ""
                                        }
                                    </ul>
                                </div>
                            </a>
                        </li>
                    `;
                        })
                        .join("");
                }

                // ID'ye göre proje getir
                getProjectById(id) {
                    return this.projects.find((project) => project.id == id);
                }

                // Proje listesi sayfasını dinamik yükle
                async loadProjectsPage() {
                    await this.loadProjects();

                    // Proje listesini güncelle
                    const projectsList = $("#projects__nav__list");
                    if (projectsList.length) {
                        projectsList.html(
                            this.generateProjectListHTML(this.projects)
                        );
                    }

                    // İlk projeyi varsayılan olarak seç
                    if (this.projects.length > 0 && !this.currentProject) {
                        this.currentProject = this.projects[0];
                        $("[data-first-project-id]").attr(
                            "data-first-project-id",
                            this.currentProject.id
                        );
                        $("[data-title]").attr(
                            "data-title",
                            this.currentProject.title
                        );
                    }
                }

                // Tek proje detay sayfası için içerik yükle
                async loadProjectDetail(projectId) {
                    await this.loadProjects();

                    this.currentProject = this.getProjectById(projectId);

                    if (!this.currentProject) {
                        console.error("Proje bulunamadı:", projectId);
                        return null;
                    }

                    // Sayfa title'ını güncelle
                    document.title =
                        this.currentProject.title + " - Maman Corp";

                    // Meta description'ı güncelle
                    if (this.currentProject.description) {
                        $('meta[name="description"]').attr(
                            "content",
                            this.currentProject.description.substring(0, 155)
                        );
                    }

                    // Proje medyalarını yükle
                    const media = await this.loadProjectMedia(projectId);
                    this.currentProject.media = media;

                    return this.currentProject;
                }

                // Proje detay içeriği HTML'ini oluştur
                generateProjectDetailHTML(project) {
                    if (!project)
                        return '<div style="padding: 50px; text-align: center;"><h2>Proje bulunamadı</h2></div>';

                    const media = project.media || [];
                    const images = media.filter(
                        (m) => m.media_type === "image"
                    );
                    const videos = media.filter(
                        (m) => m.media_type === "video"
                    );
                    const documents = media.filter(
                        (m) => m.media_type === "document"
                    );

                    return `
                    <div class="project-detail">
                        <div class="project-header">
                            <h1>${project.title}</h1>
                            ${
                                project.description
                                    ? `<p class="project-description">${project.description}</p>`
                                    : ""
                            }
                            <div class="project-meta">
                                <span class="project-date">Ekleme Tarihi: ${new Date(
                                    project.created_at || Date.now()
                                ).toLocaleDateString("tr-TR")}</span>
                            </div>
                        </div>
                        
                        ${
                            images.length > 0
                                ? `
                        <div class="project-gallery">
                            <h3>Proje Görselleri (${images.length})</h3>
                            <div class="gallery-grid">
                                ${images
                                    .map(
                                        (img) => `
                                    <div class="gallery-item" onclick="openImageModal('${
                                        img.media_url
                                    }', '${img.caption || project.title}')">
                                        <img src="${img.media_url}" alt="${
                                            img.caption || project.title
                                        }" 
                                             style="width: 100%; height: 200px; object-fit: cover; border-radius: 8px; cursor: pointer;"
                                             onerror="this.style.display='none';">
                                        ${
                                            img.caption
                                                ? `<p class="image-caption">${img.caption}</p>`
                                                : ""
                                        }
                                    </div>
                                `
                                    )
                                    .join("")}
                            </div>
                        </div>
                        `
                                : ""
                        }
                        
                        ${
                            videos.length > 0
                                ? `
                        <div class="project-videos">
                            <h3>Proje Videoları (${videos.length})</h3>
                            <div class="videos-grid">
                                ${videos
                                    .map(
                                        (video) => `
                                    <div class="video-item">
                                        <video controls style="width: 100%; border-radius: 8px;">
                                            <source src="${
                                                video.media_url
                                            }" type="video/mp4">
                                            Tarayıcınız video oynatmayı desteklemiyor.
                                        </video>
                                        ${
                                            video.caption
                                                ? `<p class="video-caption">${video.caption}</p>`
                                                : ""
                                        }
                                    </div>
                                `
                                    )
                                    .join("")}
                            </div>
                        </div>
                        `
                                : ""
                        }
                        
                        ${
                            documents.length > 0
                                ? `
                        <div class="project-documents">
                            <h3>Proje Dökümanları (${documents.length})</h3>
                            <div class="documents-list">
                                ${documents
                                    .map(
                                        (doc) => `
                                    <div class="document-item">
                                        <a href="${
                                            doc.media_url
                                        }" target="_blank" style="text-decoration: none;">
                                            <div style="padding: 15px; border: 1px solid #ddd; border-radius: 8px; display: flex; align-items: center; gap: 10px;">
                                                <span style="font-size: 2em;">📄</span>
                                                <div>
                                                    <strong>${
                                                        doc.caption || "Döküman"
                                                    }</strong>
                                                    <br><small>Görüntülemek için tıklayın</small>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                `
                                    )
                                    .join("")}
                            </div>
                        </div>
                        `
                                : ""
                        }
                        
                        ${
                            media.length === 0
                                ? `
                        <div style="padding: 40px; text-align: center; background: #f9f9f9; border-radius: 8px; margin-top: 20px;">
                            <p style="color: #666; font-size: 1.1em;">Bu proje için henüz medya dosyası eklenmemiş.</p>
                        </div>
                        `
                                : ""
                        }
                    </div>
                    
                    <!-- Görsel modal -->
                    <div id="imageModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 9999; cursor: pointer;" onclick="closeImageModal()">
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); max-width: 90%; max-height: 90%;">
                            <img id="modalImage" style="max-width: 100%; max-height: 100%; border-radius: 8px;">
                            <p id="modalCaption" style="color: white; text-align: center; margin-top: 10px;"></p>
                        </div>
                        <span style="position: absolute; top: 20px; right: 30px; color: white; font-size: 40px; cursor: pointer;">&times;</span>
                    </div>
                `;
                }
            }

            // Global proje manager instance
            window.projectManager = new ProjectManager();

            // Görsel modal fonksiyonları
            window.openImageModal = function (src, caption) {
                document.getElementById("modalImage").src = src;
                document.getElementById("modalCaption").textContent = caption;
                document.getElementById("imageModal").style.display = "block";
                document.body.style.overflow = "hidden";
            };

            window.closeImageModal = function () {
                document.getElementById("imageModal").style.display = "none";
                document.body.style.overflow = "auto";
            };

            // Sayfa yüklendiğinde çalıştır
            $(document).ready(function () {
                console.log("🚀 Entegre ProjectManager yükleniyor...");

                const currentPage = window.location.pathname;
                console.log("📄 Mevcut sayfa:", currentPage);

                // URL parametresinden ID al
                const urlParams = new URLSearchParams(window.location.search);
                const projectId = urlParams.get("id");
                console.log("🔍 Proje ID:", projectId);

                if (projectId) {
                    console.log("📱 Tek proje detay sayfası yükleniyor...");
                    // Tek proje detay sayfası
                    projectManager
                        .loadProjectDetail(projectId)
                        .then((project) => {
                            if (project) {
                                console.log(
                                    "✅ Proje detayı yüklendi:",
                                    project.title
                                );
                                // Proje listesini yükle ve bu projeyi seçili yap
                                projectManager.loadProjectsPage();
                                // Proje detayını göster
                                $("#project-content").html(
                                    projectManager.generateProjectDetailHTML(
                                        project
                                    )
                                );
                            } else {
                                console.error("❌ Proje bulunamadı");
                                $("#project-content").html(
                                    '<div style="padding: 50px; text-align: center;"><h2>Proje bulunamadı</h2><p>Aradığınız proje mevcut değil.</p></div>'
                                );
                            }
                        });
                } else {
                    console.log("📋 Proje listesi sayfası yükleniyor...");
                    // Proje listesi sayfası
                    projectManager.loadProjectsPage();
                }

                // ESC tuşu ile modal'ı kapat
                $(document).keydown(function (e) {
                    if (e.key === "Escape") {
                        closeImageModal();
                    }
                });

                console.log("✅ Entegre ProjectManager kurulumu tamamlandı");
            });
        </script>
    </body>
</html>
